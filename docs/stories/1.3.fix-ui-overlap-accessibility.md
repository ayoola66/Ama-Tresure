# Story 1.3: Fix UI Overlap and Accessibility Issues

## Status

InProgress

## Story

**As a** player,  
**I want** all UI buttons to be easily accessible and clickable,  
**so that** I can navigate the game interface without frustration.

## Acceptance Criteria

1. Game title does not overlap or obstruct the "How to Play" button
2. "How to Play" button is fully clickable at all times
3. UI layout maintains visual consistency with existing design
4. Responsive design continues to work across different screen sizes
5. No other UI elements overlap or obstruct each other
6. Button hover states and interactions work correctly

## Tasks / Subtasks

- [x] Task 1: Investigate UI overlap issue (AC: 1, 2)

  - [x] Review `.game-title` CSS positioning (lines ~290-314)
  - [x] Review `#startscreen` CSS positioning (lines ~121-136)
  - [x] Check z-index values (both had z-index: 1000)
  - [x] Identified overlap: Game title at bottom overlaps startscreen bottom area
  - [x] Verified "How to Play" button clickability issue due to overlap

- [x] Task 2: Fix game title overlap with startscreen (AC: 1, 2, 3)

  - [x] Implemented Option A: Hide game title when startscreen is visible
  - [x] Implemented Option C: Increased startscreen z-index to 1001 (backup measure)
  - [x] Added game title visibility toggle in 3 locations:
    - When showing startscreen (initial load, backToMenu)
    - When hiding startscreen (startGame)
  - [x] Game title hidden during menu, visible during gameplay
  - [x] Maintains visual consistency with existing design

- [ ] Task 3: Verify responsive design (AC: 4)

  - [ ] Test UI layout on mobile screens (<400px width)
  - [ ] Test UI layout on tablet screens (400-600px width)
  - [ ] Test UI layout on desktop screens (600px+ width)
  - [ ] Verify no overlap issues at any screen size
  - [ ] Verify all buttons remain clickable on all screen sizes

- [ ] Task 4: Check for other UI overlap issues (AC: 5)

  - [ ] Review all UI elements for potential overlaps
  - [ ] Check audio panel positioning
  - [ ] Check pause/exit button positioning
  - [ ] Check game stats overlay positioning
  - [ ] Verify no elements overlap during gameplay
  - [ ] Verify no elements overlap in menu screens

- [ ] Task 5: Verify button interactions (AC: 6)

  - [ ] Test "How to Play" button hover state
  - [ ] Test "Play Game" button hover state
  - [ ] Test all other button hover states
  - [ ] Verify button click events work correctly
  - [ ] Verify button visual feedback works

- [ ] Task 6: Integration verification (AC: 3, 4)
  - [ ] Verify game title display remains visually appealing after layout adjustments
  - [ ] Verify responsive design works correctly on mobile, tablet, and desktop screen sizes
  - [ ] Verify all other UI elements (audio panel, pause button, exit button) remain functional
  - [ ] Verify character selection interface remains unaffected

## Dev Notes

### Current Implementation Analysis

**File Location:** `play_index.html` (single monolithic file, ~4,320 lines)

**Game Title Element:**

- **HTML**: Line ~1371 - `<div class="game-title">AMA TREASURE ADVENTURE</div>`
- **CSS**: Lines ~290-314
  - `position: fixed`
  - `bottom: 20px`
  - `left: 50%`
  - `transform: translateX(-50%)`
  - `z-index: 1000`
  - Golden gradient text effect with shine animation

**Startscreen Element:**

- **HTML**: Lines ~1257-1369 - Contains all menu elements including "How to Play"
- **CSS**: Lines ~121-136
  - `position: fixed`
  - `left: 50%`
  - `top: 50%`
  - `transform: translate(-50%, -50%)` (centered)
  - `z-index: 1000` (same as game title!)
  - `max-height: 90vh`
  - `overflow-y: auto` (scrollable if content exceeds height)

**"How to Play" Button:**

- **HTML**: Line ~1303 - `<details id="how-to-play">` with `<summary>How to Play</summary>`
- Located inside `#startscreen` div
- Positioned near bottom of startscreen content

**Problem Analysis:**

1. **Z-index conflict**: Both `.game-title` and `#startscreen` have `z-index: 1000`
2. **Position conflict**: Game title at `bottom: 20px` overlaps with bottom of startscreen
3. **DOM order**: Game title comes after startscreen in DOM, so with same z-index it appears on top
4. **Screen size dependent**: Overlap more noticeable on smaller screens where startscreen extends closer to bottom

**Possible Solutions:**

1. **Hide game title when startscreen visible**: Add CSS rule to hide `.game-title` when `#startscreen` is displayed
2. **Adjust z-index**: Increase `#startscreen` z-index to 1001 (above game title)
3. **Reposition game title**: Move game title higher (e.g., `bottom: 100px`) or hide during menu
4. **Add padding**: Add bottom padding to `#startscreen` to create space for game title

**Recommended Solution:**
Hide game title when startscreen is visible, as the title is decorative and not needed during menu interaction. Show it only during gameplay or when startscreen is hidden.

**Other UI Elements to Check:**

- Audio panel (top-right corner)
- Pause/Exit buttons (top-right area)
- Game stats overlay (top-left)
- Leaderboard modal (full screen overlay, z-index: 2000)

### Technical Constraints

- **Single-file architecture**: All code in `play_index.html`, maintain existing structure
- **Visual consistency**: Must maintain existing golden gradient title design
- **Responsive design**: Must work across all screen sizes
- **Browser compatibility**: CSS positioning works in all modern browsers
- **Performance**: UI changes should not affect game performance

### Implementation Approach

1. **Primary fix**: Hide game title when startscreen is visible

   - Add CSS: `#startscreen:not([style*="display: none"]) ~ .game-title { display: none; }`
   - Or use JavaScript to toggle game title visibility based on startscreen state
   - Show game title only during gameplay

2. **Alternative/additional**: Adjust z-index

   - Increase `#startscreen` z-index to 1001
   - Ensures startscreen content is always above game title

3. **Verify responsive behavior**:

   - Test on different screen sizes
   - Ensure no overlap at any size
   - Verify scrolling works if content exceeds screen height

4. **Test all UI interactions**:
   - Verify all buttons remain clickable
   - Verify hover states work
   - Verify no visual glitches

### Testing

**Test File Location:** N/A - Manual testing in browser (no test framework)

**Testing Standards:**

- Visual inspection of UI layout
- Click testing for all buttons
- Responsive design testing on multiple screen sizes
- Browser DevTools for element inspection

**Specific Test Cases:**

1. Open game → verify "How to Play" button is fully visible and clickable
2. Click "How to Play" → verify it expands without being covered by game title
3. Test on mobile screen (<400px) → verify no overlap
4. Test on tablet screen (400-600px) → verify no overlap
5. Test on desktop screen (600px+) → verify no overlap
6. Start game → verify game title appears (if shown during gameplay)
7. Return to menu → verify "How to Play" button still clickable
8. Test all other buttons (Play Game, audio panel, pause, exit)
9. Verify hover states work on all buttons
10. Verify no other UI elements overlap

**Testing Tools:**

- Browser DevTools for element inspection and responsive testing
- Visual inspection for overlap detection
- Manual click testing for button accessibility

### Integration Verification

**IV1:** Verify game title display remains visually appealing after layout adjustments

**IV2:** Verify responsive design works correctly on mobile, tablet, and desktop screen sizes

**IV3:** Verify all other UI elements (audio panel, pause button, exit button) remain functional

**IV4:** Verify character selection interface remains unaffected

## Change Log

| Date       | Version | Description                           | Author      |
| ---------- | ------- | ------------------------------------- | ----------- |
| 2025-11-16 | 1.0     | Initial story creation                | SM (Bob)    |
| 2025-11-16 | 1.1     | Fixed UI overlap by hiding game title | Dev (James) |

## Dev Agent Record

### Agent Model Used

Composer (Cursor AI)

### Debug Log References

- No errors found in linter check
- All code changes verified syntactically correct

### Completion Notes List

**Task 1 - Investigation:**

- Reviewed CSS positioning for both game title and startscreen
- Identified z-index conflict (both had 1000)
- Confirmed game title overlaps bottom of startscreen where "How to Play" button is located
- Overlap more noticeable on smaller screens

**Task 2 - Fix Implementation:**

- Added game title element reference: `const gameTitle = document.querySelector(".game-title");` (line 1546)
- Hide game title when startscreen is visible:
  - Line 2358: Hide on initial load
  - Line 4053: Hide when returning to menu (backToMenu)
- Show game title during gameplay:
  - Line 3839: Show when starting game
- Increased startscreen z-index from 1000 to 1001 (line 133) as backup measure
- Game title now hidden during menu, visible during gameplay

**Implementation Summary:**

- Game title visibility toggled based on startscreen state
- Startscreen z-index increased to ensure it's always above game title
- "How to Play" button now fully accessible without overlap
- Visual consistency maintained - game title still appears during gameplay

**Testing Required:**

- Manual testing needed to verify "How to Play" button is fully clickable
- Test on different screen sizes (mobile, tablet, desktop)
- Verify game title appears/disappears correctly
- Verify no other UI elements overlap

### File List

**Modified Files:**

- `play_index.html` - Fixed UI overlap by hiding game title when menu is visible
  - Line 1546: Added game title element reference
  - Line 133: Increased startscreen z-index from 1000 to 1001
  - Line 2358: Hide game title on initial load
  - Line 3839: Show game title when starting game
  - Line 4053: Hide game title when returning to menu

## QA Results

_To be filled by QA Agent after review_
