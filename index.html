<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <title>Ama Treasure Adventure - Complete Edition</title>
    <link rel="stylesheet" href="css/game-styles.css?v=2" />
    <!-- CSS moved to css/game-styles.css for better organization and caching -->
  </head>
  <body>
    <div id="game-container">
      <!-- Loading Screen -->
      <div id="loadingScreen">
        <div class="loading-countdown-main">
          <span id="countdownTimer">3</span>
        </div>

        <div>
          <div class="loading-text">
            Loading Game<span class="loading-dots"></span>
          </div>
        </div>
        <div class="loading-characters">
          <div class="loading-character">ğŸ§œâ€â™€ï¸</div>
          <div class="loading-character">ğŸƒâ€â™‚ï¸</div>
          <div class="loading-character">ğŸŸ</div>
          <div class="loading-character">ğŸš—</div>
          <div class="loading-character">ğŸ</div>
          <div class="loading-character">ğŸ„â€â™‚ï¸</div>
        </div>
        <div class="loading-hint">Preloading all game assets...</div>
      </div>

      <div class="game-stats">
        <div>â³ Time: <span id="timeDisplay">40</span></div>
        <div>ğŸ† Level: <span id="levelDisplay">1</span></div>
        <div>â­ High Score: <span id="highScoreDisplay">0</span></div>
        <div id="playerStats"></div>
      </div>

      <button
        class="audio-toggle-button"
        id="audioToggleBtn"
        title="Music Settings"
      >
        ğŸµ
      </button>

      <div class="audio-controls" id="audioControls">
        <h3>ğŸµ Audio Settings</h3>
        <button id="playMusicBtn">ğŸµ Play Music</button>
        <div class="volume-control">
          <span>ğŸµ</span>
          <input type="range" id="musicVolume" min="0" max="100" value="50" />
          <span id="musicVolumeValue">50%</span>
        </div>
        <div class="volume-control">
          <span>ğŸ”Š</span>
          <input type="range" id="fxVolume" min="0" max="100" value="70" />
          <span id="fxVolumeValue">70%</span>
        </div>
        <button id="muteBtn">ğŸ”‡ Mute All</button>
      </div>

      <div class="power-up-status" id="powerUpStatus">
        <div>Active Power-up:</div>
        <div id="powerUpName">None</div>
        <div id="powerUpTime"></div>
      </div>

      <div class="game-header-buttons">
        <button id="exitButton" class="game-header-button exit-button">
          ğŸ  EXIT GAME
        </button>
        <button id="pauseButton" class="game-header-button pause-button">
          â¸ PAUSE
        </button>
      </div>

      <!-- Debug Panel -->
      <button class="debug-toggle" id="debugToggle">ğŸ› DEBUG</button>
      <div class="debug-panel" id="debugPanel">
        <h3>ğŸ› GAME ACTIVITY LOG</h3>

        <div class="debug-section">
          <h4>ğŸ“Š Current Stats</h4>
          <div id="debugStats">Loading...</div>
        </div>

        <div class="debug-section">
          <h4>ğŸ“œ Recent Activity (Last 15 events)</h4>
          <div class="debug-log" id="debugLog"></div>
        </div>
      </div>

      <div id="game">
        <div id="player1" class="sprite">ğŸ§œâ€â™€ï¸</div>
        <div id="player2" class="sprite" style="display: none">ğŸ§‘â€ğŸš€</div>
        <div id="treasure" class="sprite">ğŸ’°</div>
        <div id="gameover"></div>
        <div id="achievement"></div>

        <!-- Leaderboard Modal -->
        <div id="leaderboardModal" style="display: none">
          <div class="leaderboard-container">
            <div class="leaderboard-title">ğŸ† TOP 10 LEADERBOARD ğŸ†</div>
            <table class="leaderboard-table">
              <thead class="leaderboard-header">
                <tr>
                  <th>Rank</th>
                  <th>Player</th>
                  <th>Score</th>
                  <th>Date</th>
                </tr>
              </thead>
              <tbody id="leaderboardBody">
                <!-- Leaderboard entries will be inserted here -->
              </tbody>
            </table>
            <div class="leaderboard-buttons">
              <button class="leaderboard-button" onclick="startGame()">
                ğŸ”„ Play Again
              </button>
              <button
                class="leaderboard-button secondary"
                onclick="backToMenu()"
              >
                ğŸ  Main Menu
              </button>
            </div>
          </div>
        </div>
      </div>

      <div id="startscreen">
        <h2>ğŸï¸ Ama Treasure Adventure ğŸï¸</h2>

        <div class="mode-selection">
          <button class="mode-button selected" data-mode="1">
            <span class="icon">ğŸ¤¹â€â™‚ï¸</span>
            <span class="label">Single Player</span>
            <span class="description">Challenge yourself in solo mode!</span>
          </button>
          <button class="mode-button" data-mode="2">
            <span class="icon">ğŸ¤¸â€â™‚ï¸ğŸ¤¸â€â™€ï¸</span>
            <span class="label">Two Players</span>
            <span class="description">Compete with a friend!</span>
          </button>
        </div>

        <!-- Players Container - Side-by-side for two-player mode -->
        <div id="playersContainer" class="players-container">
          <!-- Player 1 Settings -->
          <div class="player-section">
            <h3>ğŸ® Player 1 Setup</h3>
            <p>Enter Player 1 name:</p>
            <input
              id="player1Name"
              type="text"
              placeholder="Player 1 name"
              value="Player 1"
            />

            <p>Choose Player 1 character:</p>
            <div id="player1Characters" class="character-selection"></div>
          </div>

          <!-- Player 2 Settings -->
          <div
            id="player2Settings"
            class="player-section"
            style="display: none"
          >
            <h3>ğŸ® Player 2 Setup</h3>
            <p>Enter Player 2 name:</p>
            <input
              id="player2Name"
              type="text"
              placeholder="Player 2 name"
              value="Player 2"
            />

            <p>Choose Player 2 character:</p>
            <div id="player2Characters" class="character-selection"></div>
          </div>
        </div>

        <!-- Action Buttons Container - Side by side -->
        <div class="action-buttons-container">
          <button onclick="startGame()" class="play-game-btn">ğŸš€ Play Game</button>
          <button id="howToPlayBtn" class="how-to-play-btn">
            ğŸ“– How to Play
          </button>
        </div>

        <!-- How to Play Modal -->
        <div
          id="howToPlayModal"
          class="how-to-play-modal"
          style="display: none"
        >
          <div class="how-to-play-content">
            <div class="how-to-play-header">
              <h2>ğŸ“– How to Play</h2>
              <button class="close-modal-btn" onclick="closeHowToPlay()">
                Ã—
              </button>
            </div>
            <div class="how-to-play-body">
              <p>
                <strong>ğŸ¯ Objective:</strong> Collect treasures and avoid
                obstacles before time runs out!
              </p>
              <p>
                <strong>ğŸ® Controls:</strong><br />
                - <strong>Player 1:</strong> Arrow Keys (â†‘â†“â†â†’) - Character faces
                left/right<br />
                - <strong>Player 2:</strong> WASD Keys (W=Up, A=Left, S=Down,
                D=Right) - Character faces left/right<br />
                - <strong>ESC Key:</strong> Pause/Resume game anytime
              </p>
              <p>
                <strong>ğŸ­ Characters & Backgrounds:</strong><br />
                Choose from 6 unique characters: Mermaid, Runner, Fish, Car,
                Horse, or Surfer!<br />
                Each character has its own themed background environment<br />
                Characters face the direction they move (left/right only)
              </p>
              <p>
                <strong>ğŸ’° Treasures:</strong><br />
                - ğŸ’° Coins (1 point) - Common<br />
                - âšª Silver (3 points) - Uncommon<br />
                - ğŸŒŸ Gold (5 points) - Rare<br />
                - ğŸ’ Gems (10 points) - Very Rare
              </p>
              <p>
                <strong>âš¡ Power-ups (Level 3+):</strong><br />
                - ğŸ§² Magnet: Pulls treasures closer<br />
                - âš¡ Speed: Move faster temporarily<br />
                - ğŸ›¡ï¸ Shield: Temporary invincibility<br />
                - âœ¨ Points: Double points for duration
              </p>
              <p>
                <strong>ğŸŒŠ Dynamic Obstacles:</strong><br />
                - ğŸŠ Crocodiles face their movement direction and track
                players<br />
                - ğŸ”¥ Fire and ğŸ¥¥ Coconuts move randomly<br />
                - Obstacles respawn randomly when treasures are collected!
              </p>
              <p>
                <strong>ğŸµ Audio Controls:</strong><br />
                - Click the ğŸµ button (top-right) to open/close music
                settings<br />
                - Adjust music and sound effects volumes independently<br />
                - Play/pause music and mute all sounds
              </p>
              <p>
                <strong>ğŸ“Š Level Progression:</strong><br />
                - Level 2 at 10 points, Level 3 at 30 pts, Level 4 at 60 pts<br />
                - Each level requires +10 more points than previous (+10, +20,
                +30, +40...)<br />
                - +10 seconds time bonus each level up<br />
                - Bonus life awarded at Level 6
              </p>
              <p>
                <strong>ğŸ¯ Obstacle Behavior:</strong><br />
                - Level 1: Static obstacles<br />
                - Level 2: Obstacles start bouncing<br />
                - Level 3+: Obstacles track players<br />
                - Level 5, 10, 15, 20, 25: Special horizontal crocodile
                appears!<br />
                - Level 26+: Horizontal crocodile EVERY level (maximum
                challenge!)
              </p>
            </div>
            <div class="how-to-play-footer">
              <button class="close-modal-btn" onclick="closeHowToPlay()">
                Got it!
              </button>
            </div>
          </div>
        </div>
      </div>

      <div class="game-title">AMA TREASURE ADVENTURE</div>
    </div>

    <!-- Audio Elements (must be before scripts so they exist when JS loads) -->
    <audio id="backgroundMusic" loop preload="auto">
      <source src="data/audio/background.mp3" type="audio/mpeg" />
      <source src="data/Game-Night-Groove-1.mp3" type="audio/mpeg" />
    </audio>
    <audio id="treasureSound" preload="auto">
      <source src="data/audio/treasure.mp3" type="audio/mpeg" />
    </audio>
    <audio id="powerupSound" preload="auto">
      <source src="data/audio/powerup.mp3" type="audio/mpeg" />
    </audio>
    <audio id="obstacleSound" preload="auto">
      <source src="data/audio/obstacle.mp3" type="audio/mpeg" />
    </audio>
    <audio id="achievementSound" preload="auto">
      <source src="data/audio/achievement.mp3" type="audio/mpeg" />
    </audio>
    <audio id="gameoverSound" preload="auto">
      <source src="data/audio/gameover.mp3" type="audio/mpeg" />
    </audio>
    <audio id="menuClickSound" preload="auto">
      <source src="data/audio/menu_click.mp3" type="audio/mpeg" />
    </audio>

    <!-- Debug Logger -->
    <script src="debug-logger.js"></script>

    <!-- Game JavaScript (loaded after audio elements so they exist) -->
    <script src="js/game.js"></script>
    <!-- JavaScript moved to js/game.js for better organization and caching -->
  </body>
</html>
